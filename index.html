<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cockpit Professeur - Pilotage Global</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-body: #f1f5f9; --bg-sidebar: #0f172a; --text-main: #1e293b; --text-muted: #64748b;
            --col-pedago: #3b82f6; --col-eval: #f59e0b; --col-class: #10b981; --col-proj: #8b5cf6; 
            --col-admin: #f97316; --col-live-web: #795548; --col-sites: #607d8b; 
        }
        * { box-sizing: border-box; }
        body { margin: 0; font-family: 'Inter', sans-serif; background-color: var(--bg-body); color: var(--text-main); display: flex; height: 100vh; overflow: hidden; }

        /* SIDEBAR */
        .sidebar { width: 300px; background-color: var(--bg-sidebar); color: white; display: flex; flex-direction: column; padding: 20px; flex-shrink: 0; overflow-y: auto; gap: 10px; }
        .brand { font-size: 1.3rem; font-weight: 800; color: white; display: flex; align-items: center; gap: 10px; margin-bottom: 20px; letter-spacing: 1px; }
        .nav-category { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; color: #64748b; margin: 15px 0 5px 0; }
        .nav-item { display: flex; align-items: center; gap: 12px; padding: 12px 15px; border-radius: 8px; cursor: pointer; transition: 0.2s; font-weight: 600; color: #cbd5e1; border-left: 4px solid transparent; }
        .nav-item:hover { background-color: rgba(255,255,255,0.05); color: white; }
        .nav-item.active { background-color: rgba(255,255,255,0.1); color: white; }
        .nav-item[data-theme="pedago"].active { border-left-color: var(--col-pedago); }
        .nav-item[data-theme="eval"].active { border-left-color: var(--col-eval); }
        .nav-item[data-theme="class"].active { border-left-color: var(--col-class); }
        .nav-item[data-theme="proj"].active { border-left-color: var(--col-proj); }
        .nav-item[data-theme="admin"].active { border-left-color: var(--col-admin); }
        .nav-item[data-theme="live"].active { border-left-color: var(--col-live-web); }
        .nav-item[data-theme="sites"].active { border-left-color: var(--col-sites); }

        /* MAIN CONTENT */
        .main-content { flex-grow: 1; padding: 40px; overflow-y: auto; display: flex; flex-direction: column; position: relative; }
        header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: 30px; border-bottom: 1px solid #e2e8f0; padding-bottom: 20px; }
        h1 { margin: 0; font-size: 2rem; font-weight: 800; color: var(--text-main); }
        .header-infos { text-align: right; }
        .clock-time { font-size: 1.5rem; font-weight: 800; color: var(--text-main); }
        .vacation-badge { margin-top: 5px; font-size: 0.8rem; background: #dbeafe; color: #2563eb; padding: 4px 10px; border-radius: 20px; font-weight: bold; border: 1px solid #bfdbfe; }

        .view-section { display: none; animation: fadeUp 0.4s ease-out; }
        .view-section.active { display: block; }

        /* DASHBOARD GRID */
        .quick-actions { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px; }
        .btn-quick { background: white; border: 1px solid #e2e8f0; padding: 15px; border-radius: 12px; text-align: left; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 15px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); text-decoration: none; color: inherit; }
        .btn-quick:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-color: var(--col-pedago); }
        
        .dashboard-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 25px; }
        .widget { background: white; border-radius: 16px; padding: 25px; border: 1px solid #e2e8f0; display:flex; flex-direction: column; min-height: 400px;}
        .widget h3 { margin-top: 0; border-bottom: 2px solid #f1f5f9; padding-bottom: 10px; margin-bottom: 15px; font-size: 1.1rem; display: flex; justify-content: space-between; align-items: center; }

        .planning-list { list-style: none; padding: 0; margin: 0; overflow-y: auto; }
        .course-item { padding: 15px; border-bottom: 1px solid #f8fafc; display: flex; align-items: center; border-radius: 8px; }
        .course-item.active-course { background: #dcfce7; border: 2px solid #22c55e; }
        .course-time { font-weight: 800; font-size: 0.9rem; color: #475569; width: 75px; }

        /* MÃ‰MOS */
        .alert-item { background: #fff; border: 1px solid #e2e8f0; padding: 12px; margin-bottom: 8px; border-radius: 8px; font-size: 0.9rem; display: flex; justify-content: space-between; align-items: center; }
        .alert-item.context-active { background: #fee2e2; border: 2px solid #ef4444; color: #b91c1c; font-weight: bold; animation: pulse-red 1.5s infinite; }
        @keyframes pulse-red { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.02); } }

        
        /* AGENDA */
        .right-stack{ display:flex; flex-direction:column; gap:25px; }
        .agenda-form{ display:flex; gap:6px; flex-wrap:wrap; margin-bottom:10px; }
        .agenda-form input, .agenda-form select{ padding:8px; border-radius:6px; border:1px solid #ddd; }
        .agenda-form input[type="date"], .agenda-form input[type="time"]{ width: 130px; }
        .agenda-form .wide{ flex:1; min-width: 170px; }
        .agenda-list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; }
        .agenda-item{ background:#fff; border:1px solid #e2e8f0; padding:10px 12px; border-radius:10px; display:flex; justify-content:space-between; align-items:flex-start; gap:10px; font-size:0.9rem; }
        .agenda-item.soon{ border-color:#f59e0b; background:#fffbeb; }
        .agenda-meta{ font-size:0.82rem; color:#64748b; margin-top:2px; }
        .agenda-tag{ font-weight:800; }

/* ACCORDÃ‰ONS TIROIRS */
        details { background: white; border: 1px solid #e2e8f0; border-radius: 8px; margin-bottom: 10px; overflow: hidden; }
        summary { padding: 15px; font-weight: 600; cursor: pointer; list-style: none; display: flex; justify-content: space-between; align-items: center; }
        details[open] > summary { background: #f1f5f9; border-bottom: 1px solid #e2e8f0; }
        .content-links { padding: 15px; display: flex; flex-wrap: wrap; gap: 10px; }
        .btn-yellow { display: inline-flex; align-items: center; gap: 8px; padding: 8px 16px; background: #fffbeb; color: #b45309; border: 1px solid #fcd34d; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 0.85rem; }
        .btn-blue-outline { background: #f0f9ff; color: #0369a1; border: 1px solid #bae6fd; padding: 8px 16px; border-radius: 6px; text-decoration: none; font-weight: 600; font-size: 0.85rem; cursor: pointer; }
    .badge-soon{
  display:inline-block;
  font-size:11px;
  padding:2px 8px;
  border-radius:999px;
  margin-left:8px;
  border:1px solid rgba(255,255,255,.22);
  background:rgba(255,255,255,.12);
  vertical-align:middle;
}


        /* ===== CLARTÃ‰ VISUELLE : COURS (CAP / BAC PRO) ===== */
        #course-structure > summary{
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.14);
        }
        #course-structure details > summary{
            margin-top: 8px;
        }
        #course-structure .lvl-cap > summary{
            background: rgba(37,99,235,0.12);
            border-left: 6px solid rgba(37,99,235,0.9);
            font-weight: 900;
        }
        #course-structure .lvl-bacpro > summary{
            background: rgba(22,163,74,0.12);
            border-left: 6px solid rgba(22,163,74,0.9);
            font-weight: 900;
        }
        /* Niveaux internes (thÃ©matiques / modules) */
        #course-structure .lvl-cap > details > summary{
            background: rgba(37,99,235,0.08);
            border-left: 4px solid rgba(37,99,235,0.55);
            font-weight: 800;
        }
        #course-structure .lvl-cap > details > details > summary{
            background: rgba(37,99,235,0.05);
            border-left: 3px solid rgba(37,99,235,0.35);
            font-weight: 700;
        }
        #course-structure .lvl-bacpro > details > summary{
            background: rgba(22,163,74,0.08);
            border-left: 4px solid rgba(22,163,74,0.55);
            font-weight: 800;
        }
        #course-structure .lvl-bacpro > details > details > summary{
            background: rgba(22,163,74,0.05);
            border-left: 3px solid rgba(22,163,74,0.35);
            font-weight: 700;
        }
        /* Un peu plus d'air pour les liens */
        #course-structure .content-links{
            padding-left: 10px;
        }

        /* ===== CLASSE EN TEMPS RÃ‰EL : BADGES & BLOCS ===== */
        .live-block{
            margin-top: 12px;
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 14px;
            overflow: hidden;
            background: rgba(255,255,255,0.03);
        }
        .live-summary{
            font-weight: 900;
            letter-spacing: 0.2px;
            padding: 14px 16px;
            background: rgba(255,255,255,0.05);
        }
        .live-links{
            padding: 14px 12px;
        }
        .badge-role{
            display: inline-flex;
            align-items: center;
            padding: 2px 10px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 900;
            margin-left: 10px;
            border: 1px solid rgba(0,0,0,0.08);
            white-space: nowrap;
        }
        .role-eleve{
            background: rgba(245, 158, 11, 0.18);
            color: #a16207;
            border-color: rgba(245, 158, 11, 0.28);
        }
        .role-prof{
            background: rgba(59, 130, 246, 0.18);
            color: #1d4ed8;
            border-color: rgba(59, 130, 246, 0.28);
        }
        /* Mobile : rÃ©duire un peu les summaries imbriquÃ©s */
        @media (max-width: 980px){
            #course-structure details > summary{ font-size: 0.98rem; }
            .live-summary{ font-size: 1.02rem; }
        }


        /* ===== RESPONSIVE MOBILE (sidebar drawer) ===== */
        .menu-overlay{
            display:none;
            position:fixed;
            inset:0;
            background: rgba(15,23,42,0.55);
            backdrop-filter: blur(2px);
            z-index: 999;
        }
        .menu-btn{
            display:none;
            border:none;
            background:#0f172a;
            color:#fff;
            width:44px;
            height:44px;
            border-radius:12px;
            font-size:20px;
            font-weight:900;
            cursor:pointer;
            align-items:center;
            justify-content:center;
            box-shadow: 0 6px 18px rgba(0,0,0,0.18);
            flex-shrink:0;
        }

        @media (max-width: 980px){
            body{ height:auto; overflow:auto; display:block; }
            .sidebar{
                position: fixed;
                top: 0; left: 0; bottom: 0;
                height: 100vh;
                width: min(86vw, 340px);
                transform: translateX(-110%);
                transition: transform .25s ease;
                z-index: 1000;
                padding: 18px;
            }
            .main-content{
                padding: 16px;
                min-height: 100vh;
                overflow: visible;
            }
            header{
                align-items: center;
                gap: 12px;
                margin-bottom: 16px;
                padding-bottom: 14px;
            }
            h1{ font-size: 1.35rem; }
            .clock-time{ font-size: 1.15rem; }
            .menu-btn{ display:inline-flex; }
            .dashboard-grid{ grid-template-columns: 1fr; gap: 14px; }
            .widget{ min-height: auto; padding: 16px; border-radius: 14px; }
            .quick-actions{ grid-template-columns: 1fr; }
            .btn-quick{ padding: 14px; }
            .course-time{ width: 68px; }
            summary{ padding: 14px; }
            .content-links{ padding: 12px; gap: 8px; }
            .btn-yellow, .btn-blue-outline{ width: 100%; justify-content: space-between; }
        }

        /* Menu open state */
        body.menu-open .sidebar{ transform: translateX(0); }
        body.menu-open .menu-overlay{ display:block; }


        /* PLANNING + AGENDA (fusion) */
        .course-item.is-agenda { background: #eef2ff; border: 1px solid #c7d2fe; }
        .course-item.is-agenda .course-time { color: #3730a3; }
        .course-item.is-agenda b { color: #1f2937; }

        /* TIMELINE (modal) */
        .modal-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.35); display:none; align-items:center; justify-content:center; z-index:9998; padding:14px;}
        .modal{ width:min(1100px, 96vw); max-height:88vh; overflow:auto; background:#fff; border-radius:16px; border:1px solid #e2e8f0; box-shadow:0 20px 60px rgba(0,0,0,.25); }
        .modal header{ position:sticky; top:0; background:#fff; padding:12px 14px; border-bottom:1px solid #e2e8f0; display:flex; justify-content:space-between; align-items:center; gap:10px; z-index:1;}
        .modal header h3{ margin:0; font-size:1rem; }
        .modal .content{ padding:12px 14px 16px; }
        .timeline-wrap{ display:grid; grid-template-columns: repeat(auto-fit, minmax(170px, 1fr)); gap:12px; }
        .month-col{ border:1px solid #e2e8f0; border-radius:12px; padding:10px; background:#ffffff; }
        .month-title{ font-weight:800; font-size:.95rem; margin:0 0 8px; display:flex; justify-content:space-between; align-items:center; }
        .month-bar{ display:flex; flex-wrap:wrap; gap:2px; }
        .daycell{ width:10px; height:10px; border-radius:3px; background:#f1f5f9; border:1px solid #e2e8f0; box-sizing:border-box; position:relative; }
        .daycell.vac{ background:#fde68a; border-color:#f59e0b; }
        .daycell.pfmp{ background:#bbf7d0; border-color:#22c55e; }
        .daycell.course::after{ content:""; position:absolute; inset:2px; border-radius:2px; border:1px solid #3b82f6; opacity:.75; }
        .daycell.agenda::before{ content:""; position:absolute; width:4px; height:4px; border-radius:50%; background:#111827; right:1px; bottom:1px; }
        .legend{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; margin:8px 0 0; font-size:.85rem; color:#475569; font-weight:700;}
        .legend span{ display:inline-flex; align-items:center; gap:6px; }
        .dot{ width:10px; height:10px; border-radius:3px; border:1px solid #e2e8f0; background:#f1f5f9; display:inline-block; }
        .dot.vac{ background:#fde68a; border-color:#f59e0b; }
        .dot.pfmp{ background:#bbf7d0; border-color:#22c55e; }
        .dot.course{ background:#f1f5f9; border-color:#3b82f6; box-shadow: inset 0 0 0 1px #3b82f6; }
        .dot.agenda{ background:#111827; border-color:#111827; border-radius:50%; width:8px; height:8px; }

        /* Table â€œpremiumâ€ */
        .tbl-wrap{
          overflow:auto;
          border:1px solid #e2e8f0;
          border-radius:14px;
          background:#fff;
        }
        .tbl{
          width:100%;
          border-collapse:separate;
          border-spacing:0;
          font-size:.92rem;
          min-width: 760px;
        }
        .tbl thead th{
          position: sticky;
          top: 0;
          z-index: 1;
          background:#f8fafc;
          text-align:left;
          padding:10px 12px;
          border-bottom:1px solid #e2e8f0;
          font-weight:900;
        }
        .tbl tbody td{
          padding:10px 12px;
          border-bottom:1px solid #f1f5f9;
          vertical-align:middle;
        }
        .tbl tbody tr:hover{
          background:#f8fafc;
        }
        .tbl .muted{ color:#64748b; font-weight:700; }
        .chip{
          display:inline-flex; align-items:center; gap:8px;
          padding:6px 10px;
          border-radius:999px;
          font-weight:900;
          font-size:12px;
          border:1px solid rgba(0,0,0,0.08);
          white-space:nowrap;
        }
        .chip-ok{ background: rgba(34,197,94,0.16); color:#15803d; border-color: rgba(34,197,94,0.22); }
        .chip-bad{ background: rgba(239,68,68,0.14); color:#b91c1c; border-color: rgba(239,68,68,0.22); }
        .chip-mid{ background: rgba(245,158,11,0.14); color:#b45309; border-color: rgba(245,158,11,0.22); }
        .mono{
          font-variant-numeric: tabular-nums;
          font-feature-settings: "tnum" 1;
        }

        /* DESIGN DU TABLEAU DE SUIVI */
        .results-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .results-table thead { background-color: #f1f5f9; color: #475569; font-weight: 700; text-align: left; }
        .results-table th, .results-table td { padding: 12px 15px; border-bottom: 1px solid #e2e8f0; }
        .results-table tr:hover { background-color: #f8fafc; }
        .score-good { color: #16a34a; font-weight:800; }
        .score-mid { color: #ca8a04; font-weight:800; }
        .score-bad { color: #dc2626; font-weight:800; }
        .badge-class { background:#e2e8f0; color:#475569; padding:2px 8px; border-radius:4px; font-size:0.75em; font-weight:700; }

</style>
</head>
<body>

    <nav class="sidebar">
        <div class="brand">ğŸš€ COCKPIT</div>
        <div class="nav-item active" onclick="showView('dashboard', this)">ğŸ  Tableau de Bord</div>
        <div class="nav-category">MES DOSSIERS</div>
        <div class="nav-item" data-theme="pedago" onclick="showView('view-pedago', this)">ğŸŸ¦ 1. PÃ©dagogie & Cours</div>
        <div class="nav-item" data-theme="eval" onclick="showView('view-eval', this)">ğŸŸ¨ 2. Ã‰valuation & Suivi</div>
        <div class="nav-item" data-theme="class" onclick="showView('view-class', this)">ğŸŸ© 3. Classes & Groupes</div>
        <div class="nav-item" data-theme="proj" onclick="showView('view-proj', this)">ğŸŸª 4. Projets & Transversal</div>
        <div class="nav-item" data-theme="admin" onclick="showView('view-admin', this)">ğŸŸ§ 5. Temps & Admin</div>
        <div class="nav-item" data-theme="live" onclick="showView('view-live', this)">ğŸŸ« 6. Classe en Temps RÃ©el</div>
        <div class="nav-item" data-theme="sites" onclick="showView('view-sites', this)">ğŸŒ 7. Sites Internet</div>
    </nav>

    <div id="menuOverlay" class="menu-overlay" onclick="closeMenu()" aria-hidden="true"></div>

    <main class="main-content">
        <header>
            <button id="menuBtn" class="menu-btn" aria-label="Menu" onclick="toggleMenu()">â˜°</button>
            <h1 id="page-title">Tableau de Bord</h1>
            <div class="header-infos">
                <div class="clock-time" id="clock">--:--</div>
                <div class="clock-date" id="date">--</div>
                <div id="vacation-badge" class="vacation-badge" style="display:none;"></div>
                <div id="inboxBadge" title="Nouvelles copies" style="display:none;min-width:24px;height:24px;padding:0 8px;border-radius:999px;background:#111827;color:#fff;font-weight:900;font-size:12px;align-items:center;justify-content:center;"></div>
                </div>
        </header>

        <div id="dashboard" class="view-section active">
            <div class="quick-actions">
                <a href="prof_plan.html" target="_blank" class="btn-quick"><span>ğŸª‘</span><div><strong>Plan de Classe</strong><span>Piloter les places</span></div></a>
                <a href="https://www.pronote.index-education.net/" target="_blank" class="btn-quick"><span>ğŸ“</span><div><strong>Pronote Web</strong><span>AccÃ¨s direct</span></div></a>
                <button onclick="document.getElementById('memo-input').focus()" class="btn-quick"><span>ğŸ§ </span><div><strong>MÃ©mo CiblÃ©</strong><span>Rappel contextuel</span></div></button>
            </div>
            <div class="dashboard-grid">
                <div class="widget">
                    <h3>ğŸ“… Planning <div style="font-size:0.8rem;"><button onclick="changeDate(-1)">â—€</button> <span id="planning-date-label">...</span> <button onclick="changeDate(1)">â–¶</button> <button onclick="openTimeline()" title="Timeline" style="margin-left:8px;background:#0f172a;color:white;border:none;padding:6px 10px;border-radius:8px;cursor:pointer;">Timeline</button></div></h3>
                    <ul class="planning-list" id="planning-list"></ul>
                </div>
                                <div class="right-stack">
<div class="widget memo-widget">
                    <h3>ğŸ’¡ Pense-BÃªte Contextuel</h3>
                    <div style="display:flex;gap:5px;margin-bottom:15px;">
                        <select id="memo-target" style="padding:8px;border-radius:6px;border:1px solid #ddd;"></select>
                        <input id="memo-input" style="flex-grow:1;padding:8px;border-radius:6px;border:1px solid #ddd;" placeholder="Note...">
                        <button onclick="addMemo()" style="background:#0f172a;color:white;border:none;padding:8px 15px;border-radius:6px;">+</button>
                    </div>
                    <ul class="alert-list" id="memo-list"></ul>
                </div>
            
                <div class="widget agenda-widget">
                    <h3>ğŸ—“ï¸ Agenda</h3>
                    <div class="agenda-form">
                        <select id="agenda-type">
                            <option value="RÃ©union">RÃ©union</option>
                            <option value="Parents">Parents</option>
                            <option value="Admin">Admin</option>
                            <option value="Personnel">Personnel</option>
                            <option value="Classe">Classe</option>
                            <option value="Autre">Autre</option>
                        </select>
                        <input id="agenda-date" type="date" aria-label="Date">
                        <input id="agenda-time" type="time" aria-label="Heure">
                    </div>
                    <div class="agenda-form">
                        <input id="agenda-title" class="wide" placeholder="Titre (rÃ©union, rdv...)" aria-label="Titre">
                        <input id="agenda-place" class="wide" placeholder="Lieu (optionnel)" aria-label="Lieu">
                        <button onclick="addAgenda()" style="background:#0f172a;color:white;border:none;padding:8px 15px;border-radius:6px;">+</button>
                    </div>
                    <ul class="agenda-list" id="agenda-list"></ul>
                </div>
                </div>
</div>
        </div>

        <div id="view-pedago" class="view-section">
  <h2 style="color:var(--col-pedago)">PÃ©dagogie & Cours</h2>

  <details open>
    <summary>ğŸ“ SÃ©quences CAP</summary>
    <div class="content-links">
      <a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ“ Exercices <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ—ºï¸ Progression <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ–¥ï¸ SÃ©ance projetÃ©e <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ§© ActivitÃ©s rapides <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
    </div>
  </details>

  <details>
    <summary>ğŸ“ SÃ©quences BAC PRO</summary>
    <div class="content-links">
      <a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ“ Exercices <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ—ºï¸ Progression <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ–¥ï¸ SÃ©ance projetÃ©e <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ§© ActivitÃ©s rapides <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
    </div>
  </details>

  <details id="course-structure">
    <summary>ğŸ“š Cours CAP & Bac Pro (structure)</summary>

    <details class="lvl-cap">
      <summary>CAP</summary>

      <details>
        <summary>ThÃ©matique A â€“ Lâ€™individu et sa santÃ©</summary>
        <details><summary>Module A1 â€“ Le systÃ¨me de santÃ©</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module A2 â€“ Le sommeil</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module A3 â€“ Lâ€™activitÃ© physique</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module A4 â€“ Les addictions</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module A5 â€“ SexualitÃ© / Contraception</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module A6 â€“ PrÃ©venir les IST</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module A7 â€“ Lâ€™alimentation adaptÃ©e</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
      </details>

      <details>
        <summary>ThÃ©matique B â€“ Lâ€™environnement</summary>
        <details><summary>Module B1 â€“ Les ressources en eau</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module B2 â€“ Le risque majeur</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module B3 â€“ Les ressources en Ã©nergie</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module B4 â€“ Le bruit au quotidien</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
      </details>

      <details>
        <summary>ThÃ©matique C â€“ Milieu professionnel</summary>
        <details><summary>Module C1 â€“ Contrats de travail</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module C2 â€“ Enjeux santÃ© sÃ©curitÃ©</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module C3 â€“ DÃ©marche de prÃ©vention</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module C4 â€“ Risques spÃ©cifiques</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module C5 â€“ ActivitÃ© physique (travail)</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module C6 â€“ Acteurs de prÃ©vention</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module C7 â€“ Suivi mÃ©dical</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module C8 â€“ Secourisme</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
      </details>

      <details>
        <summary>ThÃ©matique D â€“ Consommateur</summary>
        <details><summary>Module D1 â€“ Lâ€™assurance</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module D2 â€“ Le budget</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
        <details><summary>Module D3 â€“ Les achats</summary><div class="content-links"><a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">ğŸš§ BientÃ´t</span></a></div></details>
      </details>
    </details>

    <details class="lvl-bacpro">
      <summary>Bac Pro</summary>

      <details>
        <summary>Seconde Bac Pro</summary>
        <details><summary>ThÃ©matique A</summary><div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours A1 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours A2 (Sommeil) <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours A3 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours A4 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours A5 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
        </div></details>
        <details><summary>ThÃ©matique B</summary><div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours B1 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours B2 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
        </div></details>
        <details><summary>ThÃ©matique C</summary><div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours C1 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours C2 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
        </div></details>
      </details>

      <details>
        <summary>PremiÃ¨re Bac Pro</summary>
        <details><summary>ThÃ©matique A</summary><div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours A6 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours A7 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours A8 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
        </div></details>
        <details><summary>ThÃ©matique B</summary><div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours B3 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours B4 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
        </div></details>
        <details><summary>ThÃ©matique C</summary><div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours C3 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours C4 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours C5 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours C6 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
        </div></details>
      </details>

      <details>
        <summary>Terminale Bac Pro</summary>
        <details><summary>ThÃ©matique A</summary><div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours A9 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
        </div></details>
        <details><summary>ThÃ©matique B</summary><div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours B5 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
        </div></details>
        <details><summary>ThÃ©matique C</summary><div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours C7 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours C8 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours C9 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours C10 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours C11 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“„ Cours C12 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
        </div></details>
      </details>
    </details>
  </details>

  <details><summary>ğŸ“† Progressions</summary><div class="content-links"></div></details>

  <details>
    <summary>ğŸ“˜ RÃ©fÃ©rentiels PSE/PSR</summary>
    <div class="content-links">
      <a href="#" class="btn-yellow">ğŸ“˜ RÃ©fÃ©rentiel PSE CAP <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ“˜ RÃ©fÃ©rentiel PSE BAC PRO <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ“˜ RÃ©fÃ©rentiel PSR <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
    </div>
  </details>

  <details>
    <summary>ğŸ§‘â€ğŸ« PFMP / Stage</summary>
    <div class="content-links">
      <a href="#" class="btn-yellow">ğŸ“† Calendrier PFMP <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
      <a href="#" class="btn-yellow">ğŸ—‚ï¸ Documents PFMP <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
    </div>
  </details>

  <details>
    <summary>ğŸŒ¡ï¸ MÃ©tÃ©o de classe</summary>
    <div class="content-links">
      <a href="profmeteo.html" class="btn-blue-outline">ğŸŒ¡ï¸ Ouvrir ProfMÃ©tÃ©o</a>
      <a href="#" class="btn-yellow">ğŸ“Š Historique & tendances <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
    </div>
  </details>

</div>
<div id="view-eval" class="view-section">
            <h2 style="color:var(--col-eval)">Ã‰valuation & Suivi</h2>
            <details open><summary>ğŸ“‹ Suivi & Analyses</summary><div class="content-links">
                <a href="pageprof.html" target="_blank" class="btn-yellow">ğŸ“Š PageProf (Suivi)</a>
                <a href="#" class="btn-yellow">ğŸ“ˆ GÃ©nÃ©rateur</a>
            
<a href="#" class="btn-yellow">ğŸ“Š Tableau de bord <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ§¾ Grilles & barÃ¨mes <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“¥ Exports (CSV/JSON) <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ—ƒï¸ Archives <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ“ Grilles d'Ã©valuation</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ“„ ModÃ¨le CAP <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“„ ModÃ¨le BAC PRO <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ§® BarÃ¨mes (points) <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ“‚ Historique</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ—“ï¸ Notes & bilans <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ—ƒï¸ Archives PDF prof <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“¥ Exports <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ“Š Indicateurs MIMO</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ§  MÃ©mos rapides <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“Œ Ã€ faire / Suivi <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“Š Stats (usage) <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
        </div>

        <div id="view-class" class="view-section">
            <h2 style="color:var(--col-class)">Classes & Groupes</h2>
            <details open><summary>ğŸª‘ Plans de Classe</summary><div class="content-links">
                <a href="prof_plan.html" target="_blank" class="btn-yellow">ğŸš€ Piloter</a>
                <button onclick="window.open('ecran_plan.html', 'proj')" class="btn-blue-outline">ğŸ“º Projeter</button>
            
<a href="#" class="btn-yellow">ğŸ‘¥ Liste d'Ã©lÃ¨ves <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">â™¿ AmÃ©nagements <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ§© Groupes / Ã®lots <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ“‹ Listes d'Ã©lÃ¨ves</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ‘¤ PrÃ©noms + classe <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“ Notes utiles <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ” Recherche <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ§  Besoins particuliers (TSA/PAP)</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ…°ï¸ Police / consignes <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ§© Supports adaptÃ©s <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">âœ… Suivi amÃ©nagements <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ¤ Tutorat</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ“Œ Liste tuteurÃ©s <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ—“ï¸ Suivi sÃ©ances <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“ Notes / objectifs <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
        </div>

        <div id="view-proj" class="view-section">
            <h2 style="color:var(--col-proj)">Projets & TransversalitÃ©</h2>
            <details open><summary>ğŸ¨ Chef-d'Å“uvre</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ¨ CAP 1Ã¨re annÃ©e <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ¨ CAP 2Ã¨me annÃ©e <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ§¾ Grille Chef-dâ€™Å“uvre <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ¢ Projets d'Ã©tablissement</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ“„ Projet d'Ã©tablissement <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“… RÃ©unions / CR <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“ PiÃ¨ces jointes <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ§  CPS / Ateliers</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ§  Modules CPS <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ§° Outils / supports <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“ Bilans sÃ©ances <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸš€ Parcours Avenir</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ§­ SÃ©ances orientation <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“Œ Intervenants <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>â˜• CafÃ© des parents</summary><div class="content-links">
<a href="#" class="btn-yellow">â˜• Planning <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ—‚ï¸ Supports <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
        </div>

        <div id="view-admin" class="view-section">
            <h2 style="color:var(--col-admin)">Temps & Institution</h2>
            <details open><summary>ğŸ“… Emploi du temps Prof</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ—“ï¸ Vue semaine <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ—“ï¸ Vue mois <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ”— Import iCal <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ¢ PFMP (Stages)</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ“† Calendrier PFMP (classes) <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“„ Emplois du temps stage <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ¤ PACTE</summary><div class="content-links">
<a href="#" class="btn-yellow">â±ï¸ Heures rÃ©alisÃ©es <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ‘¥ Classes / actions <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ§¾ RÃ©capitulatif <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
            <details><summary>ğŸ”„ Remplacements</summary><div class="content-links">
<a href="#" class="btn-yellow">ğŸ•’ Suivi remplacements <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
<a href="#" class="btn-yellow">ğŸ“ Notes / comptes-rendus <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
</div></details>
        

<details>
  <summary>ğŸ“š Documents & RÃ©fÃ©rentiels</summary>
  <div class="content-links">
    <a href="#" class="btn-yellow">ğŸ“˜ RÃ©fÃ©rentiels (PDF) <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
    <a href="#" class="btn-yellow">ğŸ—‚ï¸ ModÃ¨les / courriers <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
    <a href="#" class="btn-yellow">ğŸ§¾ Comptes-rendus rÃ©unions <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
  </div>
</details>

</div>

                <div id="view-live" class="view-section">
          <h2 style="color:var(--col-live-web)">ğŸŸ« 6. Classe en Temps RÃ©el</h2>
          <div class="note">Organisation miroir : boutons <b>Ã‰lÃ¨ves</b> (tÃ©lÃ©phones) + boutons <b>Prof</b> (pilotage / projection).</div>

          <div class="card">

            <h3>Animation Live</h3>

            <details class="live-block" open>
              <summary class="live-summary">ğŸ—¨ï¸ Sâ€™exprimer / Explorer</summary>
              <div class="content-links live-links">
                <a href="eleve_nuage.html" class="btn btn-yellow">ğŸŒ¥ï¸ Nuage de mots <span class="badge-role role-eleve">Ã‰lÃ¨ves</span></a>
                <a href="prof_nuage.html" class="btn btn-yellow">â˜ï¸ Nuage <span class="badge-role role-prof">Prof</span></a>
                  <a href="prof_postit.html" class="btn btn-yellow">â˜ï¸ PostIt prof <span class="badge-role role-prof">Prof</span></a>

                <a href="#" class="btn btn-yellow">ğŸ’¡ Brainstorming <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
                <a href="#" class="btn btn-yellow">ğŸ’¡ Brainstorming <span class="badge-soon">ğŸš§ BientÃ´t</span> <span class="badge-role role-prof">Prof</span></a>

                <a href="eleve_meteo.html" class="btn btn-yellow">ğŸ§  Ma mÃ©tÃ©o <span class="badge-role role-eleve">Ã‰lÃ¨ves</span></a>
                <a href="prof_meteo.html" class="btn btn-yellow">ğŸ§  MÃ©tÃ©o <span class="badge-role role-prof">Prof</span></a>

                <a href="ecran_classe.html" class="btn btn-blue-outline">ğŸ“º Ã‰cran Classe <span class="badge-role role-prof">Prof</span></a>
                <a href="ecran_plat.html" class="btn btn-blue-outline">ğŸ“º Ã‰cran Plat <span class="badge-role role-prof">Prof</span></a>
              </div>
            </details>

            <details class="live-block">
              <summary class="live-summary">ğŸ¤ Travail collaboratif</summary>
              <div class="content-links live-links">
                <a href="#" class="btn btn-yellow">ğŸ‘¥ Travail de groupe <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
                <a href="#" class="btn btn-yellow">ğŸ‘¥ Travail de groupe <span class="badge-soon">ğŸš§ BientÃ´t</span> <span class="badge-role role-prof">Prof</span></a>

                <a href="prof_mindmap.html" class="btn btn-yellow">ğŸ—£ï¸ carte mentale collective <span class="badge-soon">ğŸ‘‡ ici</span></a>
                  <a href="ecran_mindmap.html" class="btn btn-yellow">ğŸ—£ï¸ carte mentale Ã©cran <span class="badge-soon">ğŸ‘‡ ici</span></a>
                  <a href="prof_itamami.html" class="btn btn-yellow">ğŸ—£ï¸ ITAMAMI <span class="badge-soon">ğŸ‘‡ ici</span></a>
                  <a href="prof_qqoqcp.html" class="btn btn-yellow">ğŸ—£ï¸ QQOQCP <span class="badge-soon">ğŸ‘‡ ici</span></a>
                  <a href="prof_pad.html" class="btn btn-yellow">ğŸ—£ï¸ PAD <span class="badge-soon">ğŸ‘‡ ici</span></a>
                  <a href="prof_ishikawa.html" class="btn btn-yellow">ğŸ—£ï¸ ishikawa <span class="badge-soon">ğŸ‘‡ ici</span></a>
                <a href="#" class="btn btn-yellow">ğŸ—£ï¸ DÃ©bat structurÃ© <span class="badge-soon">ğŸš§ BientÃ´t</span> <span class="badge-role role-prof">Prof</span></a>
              </div>
            </details>

            <details class="live-block">
              <summary class="live-summary">ğŸ¯ AutoÃ©valuation & positionnement</summary>
              <div class="content-links live-links">
                <a href="#" class="btn btn-yellow">ğŸ“Š AutoÃ©valuation <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
                <a href="#" class="btn btn-yellow">ğŸ“Š AutoÃ©valuation <span class="badge-soon">ğŸš§ BientÃ´t</span> <span class="badge-role role-prof">Prof</span></a>

                <a href="#" class="btn btn-yellow">ğŸ¯ Positionnement <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
                <a href="#" class="btn btn-yellow">ğŸ¯ Positionnement <span class="badge-soon">ğŸš§ BientÃ´t</span> <span class="badge-role role-prof">Prof</span></a>
              </div>
            </details>

            <details class="live-block">
              <summary class="live-summary">ğŸ® Jeux pÃ©dagogiques / EntraÃ®nement</summary>
              <div class="content-links live-links">
                <a href="#" class="btn btn-yellow">â±ï¸ QCM chronomÃ©trÃ© <span class="badge-soon">ğŸš§ BientÃ´t</span></a>

                <a href="eleve_vraifaux.html" class="btn btn-yellow">âœ…/âŒ Vrai / Faux <span class="badge-role role-eleve">Ã‰lÃ¨ves</span></a>
                <a href="prof_vraifaux.html" class="btn btn-yellow">âœ…/âŒ Vrai / Faux <span class="badge-role role-prof">Prof</span></a>
                 <a href="ecran_classe.html" class="btn btn-blue-outline">ğŸ“º Ã‰cran Classe prof vrai/faux <span class="badge-role role-prof">Prof</span></a>
                  
                <a href="#" class="btn btn-yellow">ğŸ® Quiz en direct <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
                <a href="#" class="btn btn-yellow">ğŸ® Quiz en direct <span class="badge-soon">ğŸš§ BientÃ´t</span> <span class="badge-role role-prof">Prof</span></a>
              </div>
            </details>

            <details class="live-block">
              <summary class="live-summary">ğŸ“¤ Productions Ã©lÃ¨ves</summary>
              <div class="content-links live-links">
                <a href="#" class="btn btn-yellow">ğŸ“ CAP 1re annÃ©e â€“ Rendre un devoir <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
                <a href="devoirA3_cap_sedentarite_pse.html" class="btn btn-yellow">ğŸ“ CAP 2e annÃ©e â€“ Rendre un devoir A3 <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
                <a href="#" class="btn btn-yellow">ğŸ“ Bac Pro â€“ Rendre un devoir <span class="badge-soon">ğŸš§ BientÃ´t</span></a>

                <a href="#" class="btn btn-blue-outline">ğŸ“¥ RÃ©ception & suivi (Prof) <span class="badge-soon">ğŸš§ BientÃ´t</span></a>
              </div>
            </details>

            <details class="live-block" open>
              <summary class="live-summary">ğŸ§˜ DÃ©tente</summary>
              <div class="content-links live-links">
                <a href="ecran_bulle.html" class="btn btn-yellow">ğŸ¤« Bulle Silence <span class="badge-role role-prof">Prof</span></a>
                <a href="ecran_zen.html" class="btn btn-yellow">ğŸ§˜ Zen <span class="badge-role role-prof">Prof</span></a>
              </div>
            </details>

          </div>
        </div>

        <div id="view-sites" class="view-section">
            <h2 style="color:var(--col-sites)">Sites Internet Favoris</h2>
            <details open><summary>ğŸ¢ Administratif</summary><div class="content-links"><a href="https://portail.ac-lyon.fr/" target="_blank" class="btn-yellow">AcadÃ©mie</a>
<a href="https://eduscol.education.fr/" class="btn btn-link">Eduscol</a>
<a href="https://www.education.gouv.fr/bo" class="btn btn-link">BO Ã‰ducation nationale</a>
<a href="https://www.service-public.fr/" class="btn btn-link">Service-public</a>
<a href="https://preventionsanteenvironnement.github.io/projetdetablissement/" class="btn btn-link">Projet D'Ã©tablissement</a>                
<a href="https://cas.ent.auvergnerhonealpes.fr/login?service=https:%2F%2F0692390Y.index-education.net%2Fpronote%2Fprofesseur.html">Mail Pro</a>                
<a href="https://www.inrs.fr/" class="btn btn-link">INRS</a>
<a href="https://cas.ent.auvergnerhonealpes.fr/login?service=https:%2F%2F0692390Y.index-education.net%2Fpronote%2Fprofesseur.html" class="btn btn-link">PronNote</a>                
</div></details>
            <details><summary>ğŸ“š PÃ©dagogique</summary><div class="content-links"><a href="https://eduscol.education.fr/" target="_blank" class="btn-yellow">Eduscol</a>
<a href="https://learningapps.org/" class="btn btn-link">LearningApps</a>
<a href="https://h5p.org/" class="btn btn-link">H5P</a>
<a href="Preventionsanteenvironnement/cps" class="btn btn-link">CPS</a>
<a href="https://preventionsanteenvironnement.github.io/PSE/" class="btn btn-link">PSE</a>
</div></details>
        </div>
    </main>
<div id="toast" style="position:fixed;bottom:18px;right:18px;display:none;max-width:320px;padding:12px 14px;border:1px solid #e5e7eb;border-radius:14px;background:white;font-weight:800;box-shadow:0 10px 30px rgba(0,0,0,.12);z-index:9999"></div>

    
        <!-- TIMELINE MODAL -->
        <div class="modal-backdrop" id="timelineModal" role="dialog" aria-modal="true" aria-label="Timeline annÃ©e scolaire">
            <div class="modal">
                <header>
                    <h3>ğŸ“† Timeline annÃ©e scolaire</h3>
                    <div style="display:flex;gap:8px;align-items:center;">
                        <button onclick="closeTimeline()" style="border:1px solid #e2e8f0;background:#fff;cursor:pointer;padding:8px 10px;border-radius:10px;font-weight:800;">Fermer</button>
                    </div>
                </header>
                <div class="content">
                    <div class="timeline-wrap" id="timelineGrid"></div>
                    <div class="legend">
                        <span><i class="dot vac"></i> Vacances</span>
                        <span><i class="dot pfmp"></i> PFMP / Stage</span>
                        <span><i class="dot course"></i> Cours</span>
                        <span><i class="dot agenda"></i> Agenda</span>
                    </div>
                </div>
            </div>
        </div>
    
<script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, deleteDoc, onSnapshot, doc, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = { apiKey: "AIzaSyAWdCMvOiAJln3eT9LIAQD3RWJUD0lQcLI", authDomain: "devoirs-pse.firebaseapp.com", projectId: "devoirs-pse", storageBucket: "devoirs-pse.firebasestorage.app", messagingSenderId: "614730413904", appId: "1:614730413904:web:a5dd478af5de30f6bede55" };
        const app = initializeApp(firebaseConfig); const db = getFirestore(app); const memosCol = collection(db, "cockpit_memos");
                const agendaCol = collection(db, "cockpit_agenda");
const copiesCol = collection(db, "bacpro");
        const toast = document.getElementById("toast");
        const inboxBadge = document.getElementById("inboxBadge");
        let unseenCopies = 0;
        let firstCopiesSnapshot = true;

        function showToast(msg){
        if(!toast) return;
        toast.textContent = msg;
        toast.style.display = "block";
        clearTimeout(window.__toastTimer);
        window.__toastTimer = setTimeout(() => toast.style.display = "none", 2600);
        }

        function setBadge(n){
        if(!inboxBadge) return;
        inboxBadge.style.display = n > 0 ? "flex" : "none";
        inboxBadge.textContent = String(n);
        }
        const copiesQuery = query(
        copiesCol,
        orderBy("meta.createdAt", "desc"),
        limit(20)
        );

        onSnapshot(copiesQuery, (snap) => {
        if(firstCopiesSnapshot){
        firstCopiesSnapshot = false;
        return;
        }

        let added = 0;
        snap.docChanges().forEach((ch) => {
        if(ch.type === "added") added++;
        });

        if(added > 0){
        unseenCopies += added;
        setBadge(unseenCopies);
        showToast("Nouvelle copie reÃ§ue : +" + added);
        }
        });
        const CLASSES = ["PremiÃ¨re AGORA", "Terminale AGORA", "Seconde GATL", "B1MELEC", "B2MELEC", "BTMELEC", "CAN 1", "HORT 2", "JP 1", "JP 2", "PSR 1", "PSR 2", "VAN"];

        let activeClass = null, offset = 0, evs = [], agendaEvents = [];

        window.openMenu = () => document.body.classList.add('menu-open');
        window.closeMenu = () => document.body.classList.remove('menu-open');
        window.toggleMenu = () => document.body.classList.toggle('menu-open');

        window.addMemo = async () => { const i = document.getElementById('memo-input'), t = document.getElementById('memo-target').value; if(i.value.trim()==="") return; await addDoc(memosCol, { text: i.value, target: t, timestamp: Date.now() }); i.value = ""; };
        window.deleteMemo = async (id) => await deleteDoc(doc(db, "cockpit_memos", id));

        

        window.addAgenda = async () => {
            const typeEl = document.getElementById('agenda-type');
            const dateEl = document.getElementById('agenda-date');
            const timeEl = document.getElementById('agenda-time');
            const titleEl = document.getElementById('agenda-title');
            const placeEl = document.getElementById('agenda-place');

            const title = (titleEl?.value || '').trim();
            if(!title){ showToast("Agenda : ajoute un titre"); return; }

            const type = (typeEl?.value || 'Autre').trim();
            const date = (dateEl?.value || new Date().toISOString().slice(0,10));
            const time = (timeEl?.value || '08:00');
            const dt = new Date(`${date}T${time}:00`);
            const datetime = isNaN(dt.getTime()) ? Date.now() : dt.getTime();

            await addDoc(agendaCol, {
                type,
                title,
                place: (placeEl?.value || '').trim(),
                datetime,
                createdAt: new Date().toISOString()
            });

            if(titleEl) titleEl.value = "";
            if(placeEl) placeEl.value = "";
        };

        window.deleteAgenda = async (id) => await deleteDoc(doc(db, "cockpit_agenda", id));

        onSnapshot(query(agendaCol, orderBy("datetime", "asc"), limit(50)), (snap) => {
            agendaEvents = [];
            snap.forEach(d => { const a = d.data(); if(a && typeof a.datetime === "number") agendaEvents.push({ id:d.id, type:a.type||'Autre', title:a.title||'', place:a.place||'', datetime:a.datetime }); });

            const list = document.getElementById('agenda-list');
            if(!list) return;
            list.innerHTML = "";

            const now = Date.now();
            const keepFrom = now - (24*60*60*1000); // garde un peu d'historique (24h)

            snap.forEach(d => {
                const a = d.data();
                if(!a || typeof a.datetime !== "number") return;
                if(a.datetime < keepFrom) return;

                const dt = new Date(a.datetime);
                const isSoon = (a.datetime - now) <= (24*60*60*1000) && (a.datetime - now) >= -(24*60*60*1000);

                const li = document.createElement('li');
                li.className = `agenda-item ${isSoon ? 'soon' : ''}`;

                const dateTxt = dt.toLocaleString('fr-FR', { weekday:'short', day:'2-digit', month:'2-digit', hour:'2-digit', minute:'2-digit' });
                const place = (a.place || '').trim();

                li.innerHTML = `
                    <div>
                        <div><span class="agenda-tag">[${a.type || 'Autre'}]</span> ${a.title || ''}</div>
                        <div class="agenda-meta">${dateTxt}${place ? " â€¢ " + place : ""}</div>
                    </div>
                    <button onclick="deleteAgenda('${d.id}')" style="border:none;background:none;cursor:pointer;">âœ•</button>
                `;
                list.appendChild(li);
            });
        
            try{ render(); }catch(e){}
});

onSnapshot(query(memosCol, orderBy("timestamp", "desc")), (snap) => {
            const list = document.getElementById('memo-list'); list.innerHTML = "";
            snap.forEach(d => {
                const m = d.data(); const isMatch = activeClass && activeClass.includes(m.target) && m.target !== 'General';
                const li = document.createElement('li'); li.className = `alert-item ${isMatch ? 'context-active' : ''}`;
                li.innerHTML = `<div><b>[${m.target}]</b> ${m.text}</div><button onclick="deleteMemo('${d.id}')" style="border:none;background:none;cursor:pointer;">âœ•</button>`;
                list.appendChild(li);
            });
        });

        const URL = "https://0692390y.index-education.net/pronote/ical/mesinformations.ics?icalsecurise=5FCC8714D0288D0C735DBB51F2A682873D9407D68F403E748C4860B26B18CFA16BE48C43C48C24A416FA30C689813A61&version=2025.2.8&param=900A75DF9ED8C62E212781A9E4DCC937";
        window.changeDate = (o) => { offset += o; render(); };

        
        window.openTimeline = () => {
            const modal = document.getElementById('timelineModal');
            if(modal){ modal.style.display = 'flex'; }
            buildTimeline();
        };
        window.closeTimeline = () => {
            const modal = document.getElementById('timelineModal');
            if(modal){ modal.style.display = 'none'; }
        };
        window.addEventListener('keydown', (e) => {
            if(e.key === 'Escape'){ try{ closeTimeline(); }catch(_){} }
        });
        // clic sur le fond pour fermer
        (function(){
            const modal = document.getElementById('timelineModal');
            if(modal){
                modal.addEventListener('click', (e) => {
                    if(e.target === modal){ closeTimeline(); }
                });
            }
        })();

        function buildTimeline(){
            const grid = document.getElementById('timelineGrid');
            if(!grid) return;
            if(!evs || !evs.length){
                grid.innerHTML = "<div class='month-col'><p style='margin:0;color:#475569;font-weight:800;'>Planning non chargÃ©.</p></div>";
                return;
            }

            // bornes
            const starts = evs.filter(e=>e.start).map(e=>e.start.getTime());
            const ends = evs.filter(e=>e.end).map(e=>e.end.getTime());
            const minT = Math.min(...starts);
            const maxT = Math.max(...ends);

            const start = new Date(minT);
            const end = new Date(maxT);
            const startMonth = new Date(start.getFullYear(), start.getMonth(), 1);
            const endMonth = new Date(end.getFullYear(), end.getMonth(), 1);

            // map jour -> tags
            const map = {};
            const keyOf = (d) => {
                const y=d.getFullYear();
                const m=String(d.getMonth()+1).padStart(2,'0');
                const da=String(d.getDate()).padStart(2,'0');
                return `${y}-${m}-${da}`;
            };
            const addTag = (k, tag) => {
                if(!map[k]) map[k] = { vac:false, pfmp:false, course:false, agenda:false };
                map[k][tag] = true;
            };

            // Ã©vÃ©nements ICS (cours / vacances / PFMP)
            evs.forEach(e => {
                if(!e.start || !e.end) return;
                const s = new Date(e.start.getFullYear(), e.start.getMonth(), e.start.getDate());
                const ee = new Date(e.end.getFullYear(), e.end.getMonth(), e.end.getDate());
                // itÃ¨re jour par jour (end non inclus)
                for(let d=new Date(s); d<=ee; d.setDate(d.getDate()+1)){
                    const k = keyOf(d);
                    const sum = (e.summary||"").toLowerCase();
                    if(sum.includes("vacances")) addTag(k, "vac");
                    else if(sum.includes("pfmp") || sum.includes("stage")) addTag(k, "pfmp");
                    else addTag(k, "course");
                    // Ã©vite de dÃ©passer si Ã©vÃ©nement d'une journÃ©e (end=next day)
                    if(d.getTime() === ee.getTime() && e.end.getHours()===0 && e.end.getMinutes()===0) break;
                }
            });

            // agenda cockpit
            (agendaEvents||[]).forEach(a => {
                if(typeof a.datetime !== "number") return;
                const d = new Date(a.datetime);
                addTag(keyOf(d), "agenda");
            });

            // construit colonnes mois
            const months = [];
            for(let d=new Date(startMonth); d<=endMonth; d.setMonth(d.getMonth()+1)){
                months.push(new Date(d.getFullYear(), d.getMonth(), 1));
                if(months.length>18) break;
            }

            const fmt = (d) => d.toLocaleDateString('fr-FR',{month:'long', year:'numeric'});
            grid.innerHTML = "";
            months.forEach(mo => {
                const y = mo.getFullYear();
                const m = mo.getMonth();
                const daysInMonth = new Date(y, m+1, 0).getDate();

                const col = document.createElement('div');
                col.className = "month-col";

                const title = document.createElement('div');
                title.className = "month-title";
                title.innerHTML = `<span>${fmt(mo)}</span><span style="color:#64748b;font-weight:900;font-size:.85rem;">${daysInMonth}j</span>`;
                col.appendChild(title);

                const bar = document.createElement('div');
                bar.className = "month-bar";

                for(let day=1; day<=daysInMonth; day++){
                    const d = new Date(y, m, day);
                    const k = keyOf(d);
                    const cell = document.createElement('div');
                    cell.className = "daycell";
                    const tags = map[k];
                    if(tags){
                        if(tags.vac) cell.classList.add("vac");
                        if(tags.pfmp) cell.classList.add("pfmp");
                        if(tags.course) cell.classList.add("course");
                        if(tags.agenda) cell.classList.add("agenda");
                    }
                    cell.title = `${d.toLocaleDateString('fr-FR',{weekday:'long', day:'numeric', month:'long'})}`;
                    bar.appendChild(cell);
                }

                col.appendChild(bar);
                grid.appendChild(col);
            });
        }

async function init() {
            const s = document.getElementById('memo-target'); s.innerHTML = '<option value="General">GÃ©nÃ©ral</option>';
            CLASSES.forEach(c => { const o = document.createElement('option'); o.value = c; o.innerText = c; s.appendChild(o); });
                        const ad = document.getElementById("agenda-date"); if(ad) ad.value = new Date().toISOString().slice(0,10);
            const at = document.getElementById("agenda-time"); if(at) at.value = new Date().toTimeString().slice(0,5);
try {
                const res = await fetch("https://api.allorigins.win/raw?url=" + encodeURIComponent(URL));
                const text = await res.text(); evs = parse(text); render();
            } catch(e) { console.error(e); }
        }

        function parse(t) {
            const res = []; const lines = t.split(/\r\n|\n|\r/); let c = {};
            lines.forEach(l => {
                if(l.startsWith("BEGIN:VEVENT")) c = {};
                else if(l.startsWith("DTSTART")) c.start = pDate(l.split(':')[1]);
                else if(l.startsWith("DTEND")) c.end = pDate(l.split(':')[1]);
                else if(l.startsWith("SUMMARY")) c.summary = l.split(':')[1];
                else if(l.startsWith("LOCATION")) c.location = l.split(':')[1];
                else if(l.startsWith("END:VEVENT")) res.push(c);
            });
            return res;
        }
        function pDate(s) { if(!s)return null; return new Date(`${s.substr(0,4)}-${s.substr(4,2)}-${s.substr(6,2)}T${s.substr(9,2)}:${s.substr(11,2)}:00Z`); }

        function render() {
            const list = document.getElementById('planning-list'); const target = new Date(); target.setDate(target.getDate() + offset);
            document.getElementById('planning-date-label').innerText = target.toLocaleDateString('fr-FR', {day:'numeric', month:'short'});
            list.innerHTML = ""; activeClass = null;
            const day = evs.filter(e => e.start && e.start.toDateString() === target.toDateString()).sort((a,b)=>a.start-b.start);
            const ag = (agendaEvents||[]).filter(a => {
                const dt = new Date(a.datetime);
                return dt.toDateString() === target.toDateString();
            }).map(a => ({
                _kind: "agenda",
                start: new Date(a.datetime),
                end: new Date(a.datetime + 30*60*1000),
                summary: `[${a.type||'Agenda'}] ${a.title||''}`.trim(),
                location: (a.place||'').trim()
            }));

            const items = [...day.map(e => ({...e, _kind:"course"})), ...ag].sort((a,b)=>a.start-b.start);

            if(!items.length) list.innerHTML = "<li>Vacances / Aucun cours</li>";
            items.forEach(e => {
                const isNow = new Date() >= e.start && new Date() <= e.end;
                if(isNow && e._kind !== 'agenda') activeClass = e.summary;
                const li = document.createElement('li'); li.className = `course-item ${isNow ? 'active-course' : ''} ${e._kind==='agenda' ? 'is-agenda' : ''}`;
                li.innerHTML = `<div class="course-time">${e.start.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})}</div><div class="course-details"><b>${e.summary}</b><br><small>${e.location||''}</small></div>`;
                list.appendChild(li);
            });
            const v = evs.find(e => e.summary.includes("Vacances") && e.start > new Date());
            if(v) { const d = Math.ceil((v.start-new Date())/(1000*3600*24)); const b = document.getElementById('vacation-badge'); b.style.display='block'; b.innerText=`ğŸ–ï¸ Vacances dans ${d} jours`; }
        }

        window.showView = (id, el) => {
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(id).classList.add('active'); el.classList.add('active');
            document.getElementById('page-title').innerText = el.innerText;
            if (window.innerWidth <= 980) closeMenu();
};
        setInterval(() => { const n = new Date(); document.getElementById('clock').innerText = n.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}); document.getElementById('date').innerText = n.toLocaleDateString('fr-FR',{weekday:'long', day:'numeric', month:'long'}); render(); }, 60000);
        setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}); }, 1000);
        init();
        window.addEventListener('resize', () => { if (window.innerWidth > 980) closeMenu(); });
    </script>
</body>
</html>
