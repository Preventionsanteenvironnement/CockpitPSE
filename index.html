<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cockpit Professeur â€“ Pilotage Global</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg-body:#f1f5f9; --bg-sidebar:#0f172a; --text-main:#1e293b; --text-muted:#64748b;
      --col-pedago:#3b82f6; --col-eval:#f59e0b; --col-class:#10b981; --col-proj:#8b5cf6;
      --col-admin:#f97316; --col-live-web:#795548; --col-sites:#607d8b;
    }
    *{box-sizing:border-box;}
    body{
      margin:0; font-family:'Inter',sans-serif;
      background-color:var(--bg-body); color:var(--text-main);
      display:flex; height:100vh; overflow:hidden;
    }

    /* SIDEBAR */
    .sidebar{
      width:300px; background-color:var(--bg-sidebar); color:#fff;
      display:flex; flex-direction:column; padding:20px; flex-shrink:0;
      overflow-y:auto; gap:10px;
    }
    .brand{
      font-size:1.3rem; font-weight:800; margin-bottom:20px;
      letter-spacing:1px; display:flex; align-items:center; gap:10px;
    }
    .nav-category{
      font-size:.75rem; text-transform:uppercase; letter-spacing:1px;
      font-weight:700; color:#64748b; margin:15px 0 5px;
    }
    .nav-item{
      display:flex; align-items:center; gap:12px;
      padding:12px 15px; border-radius:8px;
      cursor:pointer; transition:.2s;
      font-weight:600; color:#cbd5e1; border-left:4px solid transparent;
    }
    .nav-item:hover{background:rgba(255,255,255,.05); color:#fff;}
    .nav-item.active{background:rgba(255,255,255,.10); color:#fff;}
    .nav-item[data-theme="pedago"].active{border-left-color:var(--col-pedago);}
    .nav-item[data-theme="eval"].active{border-left-color:var(--col-eval);}
    .nav-item[data-theme="class"].active{border-left-color:var(--col-class);}
    .nav-item[data-theme="proj"].active{border-left-color:var(--col-proj);}
    .nav-item[data-theme="admin"].active{border-left-color:var(--col-admin);}
    .nav-item[data-theme="live"].active{border-left-color:var(--col-live-web);}
    .nav-item[data-theme="sites"].active{border-left-color:var(--col-sites);}

    /* MAIN */
    .main-content{
      flex:1; padding:40px; overflow-y:auto;
      display:flex; flex-direction:column; position:relative;
    }
    header{
      display:flex; justify-content:space-between; align-items:flex-end;
      margin-bottom:30px; border-bottom:1px solid #e2e8f0; padding-bottom:20px;
    }
    h1{margin:0; font-size:2rem; font-weight:800; color:var(--text-main);}
    .header-infos{text-align:right;}
    .clock-time{font-size:1.5rem; font-weight:800;}
    .clock-date{font-size:.9rem; color:var(--text-muted);}
    .vacation-badge{
      margin-top:5px; font-size:.8rem;
      background:#dbeafe; color:#2563eb;
      padding:4px 10px; border-radius:20px;
      border:1px solid #bfdbfe; font-weight:bold;
    }

    .view-section{display:none; animation:fadeUp .4s ease-out;}
    .view-section.active{display:block;}
    @keyframes fadeUp{from{opacity:0;transform:translateY(6px);}to{opacity:1;transform:translateY(0);}}

    .quick-actions{
      display:grid; grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
      gap:15px; margin-bottom:30px;
    }
    .btn-quick{
      background:#fff; border:1px solid #e2e8f0; padding:15px;
      border-radius:12px; text-align:left; cursor:pointer;
      transition:.2s; display:flex; align-items:center; gap:15px;
      box-shadow:0 2px 4px rgba(0,0,0,.02);
      text-decoration:none; color:inherit;
    }
    .btn-quick span:last-child{display:block; font-size:.8rem; color:var(--text-muted);}
    .btn-quick:hover{
      transform:translateY(-2px); box-shadow:0 5px 15px rgba(0,0,0,.05);
      border-color:var(--col-pedago);
    }

    .dashboard-grid{display:grid; grid-template-columns:2fr 1fr; gap:25px;}
    .widget{
      background:#fff; border-radius:16px; padding:25px;
      border:1px solid #e2e8f0; display:flex; flex-direction:column; min-height:320px;
    }
    .widget h3{
      margin:0 0 15px; padding-bottom:10px;
      border-bottom:2px solid #f1f5f9;
      font-size:1.1rem; display:flex; justify-content:space-between; align-items:center;
    }

    .planning-list{list-style:none; margin:0; padding:0; overflow-y:auto;}
    .course-item{
      padding:12px; border-bottom:1px solid #f8fafc;
      display:flex; align-items:flex-start; gap:10px; border-radius:8px;
    }
    .course-item.active-course{background:#dcfce7; border:2px solid #22c55e;}
    .course-time{width:70px; font-weight:800; font-size:.9rem; color:#475569;}
    .course-details{flex:1;}
    .course-details small{color:#64748b;}

    .right-stack{display:flex; flex-direction:column; gap:25px;}

    /* MEMO */
    .alert-list{list-style:none; margin:0; padding:0;}
    .alert-item{
      background:#fff; border:1px solid #e2e8f0; padding:8px 10px;
      border-radius:8px; font-size:.9rem;
      display:flex; justify-content:space-between; align-items:center; gap:8px; margin-bottom:6px;
    }
    .alert-item.context-active{
      background:#fee2e2; border:2px solid #ef4444; color:#b91c1c; font-weight:bold;
      animation:pulse-red 1.5s infinite;
    }
    @keyframes pulse-red{0%,100%{transform:scale(1);}50%{transform:scale(1.02);}}

    /* AGENDA */
    .agenda-form{display:flex; gap:6px; flex-wrap:wrap; margin-bottom:10px;}
    .agenda-form input,.agenda-form select{
      padding:8px; border-radius:6px; border:1px solid #ddd; font-size:.85rem;
    }
    .agenda-form .wide{flex:1; min-width:170px;}
    .agenda-list{list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:8px;}
    .agenda-item{
      background:#fff; border:1px solid #e2e8f0; padding:10px 12px;
      border-radius:10px; display:flex; justify-content:space-between; gap:10px; font-size:.9rem;
    }
    .agenda-item.soon{border-color:#f59e0b; background:#fffbeb;}
    .agenda-meta{font-size:.8rem; color:#64748b; margin-top:2px;}

    /* DETAILS / ACCORDIONS */
    details{
      background:#fff; border:1px solid #e2e8f0;
      border-radius:8px; margin-bottom:10px; overflow:hidden;
    }
    summary{
      padding:15px; font-weight:600; cursor:pointer;
      list-style:none; display:flex; justify-content:space-between; align-items:center;
    }
    details[open]>summary{background:#f1f5f9; border-bottom:1px solid #e2e8f0;}
    .content-links{
      padding:15px; display:flex; flex-wrap:wrap; gap:10px;
    }

    .btn-yellow{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 16px; background:#fffbeb; color:#b45309;
      border:1px solid #fcd34d; border-radius:6px;
      text-decoration:none; font-weight:600; font-size:.85rem;
    }
    .btn-blue-outline{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 16px; background:#f0f9ff; color:#0369a1;
      border:1px solid #bae6fd; border-radius:6px;
      text-decoration:none; font-weight:600; font-size:.85rem; cursor:pointer;
    }
    .badge-soon{
      display:inline-block; font-size:11px; padding:2px 8px;
      border-radius:999px; margin-left:6px;
      border:1px solid rgba(0,0,0,.05); background:#fef3c7; color:#92400e;
    }

    /* STRUCTURE CAP / BAC PRO (visuel) */
    #course-structure>summary{
      background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.14);
    }
    #course-structure .lvl-cap>summary{
      background:rgba(37,99,235,.12); border-left:6px solid rgba(37,99,235,.9); font-weight:900;
    }
    #course-structure .lvl-bacpro>summary{
      background:rgba(22,163,74,.12); border-left:6px solid rgba(22,163,74,.9); font-weight:900;
    }

    /* LIVE */
    .live-block{
      margin-top:12px; border:1px solid rgba(0,0,0,.08);
      border-radius:14px; overflow:hidden; background:#fff;
    }
    .live-summary{
      font-weight:900; padding:14px 16px; background:#f1f5f9;
    }
    .live-links{padding:14px 12px;}

    .badge-role{
      display:inline-flex; align-items:center;
      padding:2px 10px; border-radius:999px;
      font-size:12px; font-weight:900; margin-left:8px;
      border:1px solid rgba(0,0,0,.08); white-space:nowrap;
    }
    .role-eleve{background:rgba(245,158,11,.18); color:#a16207;}
    .role-prof{background:rgba(59,130,246,.18); color:#1d4ed8;}

    /* SCORES TABLE */
    .scores-card{
      background:#fff; border-radius:18px; border:1px solid #e2e8f0;
      padding:18px 18px 12px; box-shadow:0 10px 30px rgba(15,23,42,.06);
      max-width:1100px;
    }
    .scores-toolbar{
      display:flex; flex-wrap:wrap; align-items:center; gap:10px; margin-bottom:12px;
    }
    .scores-pill{
      display:inline-flex; align-items:center; gap:6px;
      padding:4px 10px; border-radius:999px; background:#fef3c7;
      color:#92400e; font-size:.8rem; font-weight:700;
    }
    .scores-button{
      border:none; border-radius:999px; padding:7px 14px;
      font-size:.9rem; font-weight:600; cursor:pointer;
      background:#0f172a; color:#fff; display:inline-flex; align-items:center; gap:6px;
    }
    .scores-button[disabled]{opacity:.6; cursor:default;}
    .scores-counter{margin-left:auto; font-size:.85rem; color:#64748b;}
    .scores-filters{display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px;}
    .scores-filters input,.scores-filters select{
      border-radius:999px; border:1px solid #e2e8f0; padding:6px 11px; font-size:.85rem; min-width:120px;
    }
    .scores-table-wrap{margin-top:4px; border-radius:14px; border:1px solid #e5e7eb; overflow:auto;}
    .results-table{width:100%; border-collapse:collapse; min-width:600px;}
    .results-table thead{background:#f1f5f9; color:#475569;}
    .results-table th,.results-table td{padding:10px 12px; border-bottom:1px solid #e2e8f0; text-align:left; font-size:.88rem;}
    .results-table tr:hover{background:#f8fafc;}
    .scores-empty{text-align:center; color:#64748b; padding:14px;}
    .score-good{color:#16a34a; font-weight:700;}
    .score-mid{color:#ca8a04; font-weight:700;}
    .score-bad{color:#dc2626; font-weight:700;}

    .results-table th.sortable{cursor:pointer;user-select:none;}
    .results-table th.sortable::after{content:"";margin-left:4px;font-size:.7rem;color:#9ca3af;}
    .results-table th.sortable.sort-asc::after{content:"â–²";}
    .results-table th.sortable.sort-desc::after{content:"â–¼";}

    .scores-status-bar{
      margin-top:10px; font-size:.8rem; color:#64748b;
      display:flex; flex-wrap:wrap; gap:10px;
    }
    .scores-dot{
      width:8px; height:8px; border-radius:999px; background:#22c55e; margin-right:6px;
    }

    /* MENU MOBILE */
    .menu-overlay{
      display:none; position:fixed; inset:0;
      background:rgba(15,23,42,.55); backdrop-filter:blur(2px);
      z-index:999;
    }
    .menu-btn{
      display:none; border:none; background:#0f172a; color:#fff;
      width:44px; height:44px; border-radius:12px;
      font-size:20px; font-weight:900; cursor:pointer;
      align-items:center; justify-content:center;
      box-shadow:0 6px 18px rgba(0,0,0,.18); flex-shrink:0;
    }
    body.menu-open .sidebar{transform:translateX(0);}
    body.menu-open .menu-overlay{display:block;}

    @media(max-width:980px){
      body{height:auto; overflow:auto; display:block;}
      .sidebar{
        position:fixed; top:0; left:0; bottom:0;
        height:100vh; width:min(86vw,340px);
        transform:translateX(-110%);
        transition:transform .25s ease;
        z-index:1000; padding:18px;
      }
      .main-content{padding:16px; min-height:100vh; overflow:visible;}
      header{align-items:center; gap:12px; margin-bottom:16px; padding-bottom:14px;}
      h1{font-size:1.35rem;}
      .clock-time{font-size:1.15rem;}
      .menu-btn{display:inline-flex;}
      .dashboard-grid{grid-template-columns:1fr; gap:14px;}
      .widget{min-height:auto; padding:16px; border-radius:14px;}
      .quick-actions{grid-template-columns:1fr;}
      .btn-quick{padding:14px;}
      .course-time{width:68px;}
      summary{padding:14px;}
      .content-links{padding:12px; gap:8px;}
      .btn-yellow,.btn-blue-outline{width:100%; justify-content:space-between;}
    }
  </style>
</head>
<body>

  <nav class="sidebar">
    <div class="brand">ğŸš€ COCKPIT</div>
    <div class="nav-item active" onclick="showView('dashboard', this)">ğŸ  Tableau de bord</div>

    <div class="nav-category">Mes dossiers</div>
    <div class="nav-item" data-theme="pedago" onclick="showView('view-pedago', this)">ğŸŸ¦ 1. PÃ©dagogie & cours</div>
    <div class="nav-item" data-theme="eval" onclick="showView('view-eval', this)">ğŸŸ¨ 2. Ã‰valuation & suivi</div>
    <div class="nav-item" data-theme="eval" onclick="showView('view-scores', this)">ğŸŸ¨ 2b. Scores exercices</div>
    <div class="nav-item" data-theme="class" onclick="showView('view-class', this)">ğŸŸ© 3. Classes & groupes</div>
    <div class="nav-item" data-theme="proj" onclick="showView('view-proj', this)">ğŸŸª 4. Projets & transversal</div>
    <div class="nav-item" data-theme="admin" onclick="showView('view-admin', this)">ğŸŸ§ 5. Temps & admin</div>
    <div class="nav-item" data-theme="live" onclick="showView('view-live', this)">ğŸŸ« 6. Classe en temps rÃ©el</div>
    <div class="nav-item" data-theme="sites" onclick="showView('view-sites', this)">ğŸŒ 7. Sites internet</div>
  </nav>

  <div id="menuOverlay" class="menu-overlay" onclick="closeMenu()"></div>

  <main class="main-content">
    <header>
      <button id="menuBtn" class="menu-btn" onclick="toggleMenu()">â˜°</button>
      <h1 id="page-title">Tableau de bord</h1>
      <div class="header-infos">
        <div id="clock" class="clock-time">--:--</div>
        <div id="date" class="clock-date">--</div>
        <div id="vacation-badge" class="vacation-badge" style="display:none;"></div>
        <div id="inboxBadge" style="display:none;min-width:24px;height:24px;padding:0 8px;border-radius:999px;background:#111827;color:#fff;font-weight:900;font-size:12px;align-items:center;justify-content:center;"></div>
      </div>
    </header>

    <!-- DASHBOARD -->
    <section id="dashboard" class="view-section active">
      <div class="quick-actions">
        <a href="prof_plan.html" target="_blank" class="btn-quick">
          <span>ğŸª‘</span><span><strong>Plan de classe</strong><br>Pilotage des places</span>
        </a>
        <a href="https://www.pronote.index-education.net/" target="_blank" class="btn-quick">
          <span>ğŸ“</span><span><strong>Pronote Web</strong><br>AccÃ¨s rapide</span>
        </a>
        <button class="btn-quick" type="button" onclick="document.getElementById('memo-input').focus()">
          <span>ğŸ§ </span><span><strong>MÃ©mo ciblÃ©</strong><br>Rappel contextuel</span>
        </button>
      </div>

      <div class="dashboard-grid">
        <div class="widget">
          <h3>
            ğŸ“… Planning
            <span style="font-size:.8rem;">
              <button type="button" onclick="changeDate(-1)">â—€</button>
              <span id="planning-date-label">Aujourdâ€™hui</span>
              <button type="button" onclick="changeDate(1)">â–¶</button>
            </span>
          </h3>
          <ul id="planning-list" class="planning-list"></ul>
        </div>

        <div class="right-stack">
          <div class="widget">
            <h3>ğŸ’¡ Pense-bÃªte</h3>
            <div class="agenda-form">
              <select id="memo-target">
                <option value="dashboard">Tableau de bord</option>
                <option value="view-pedago">PÃ©dagogie</option>
                <option value="view-eval">Ã‰valuation</option>
                <option value="view-class">Classes</option>
                <option value="view-proj">Projets</option>
                <option value="view-admin">Admin</option>
                <option value="view-live">Classe live</option>
              </select>
              <input id="memo-input" class="wide" placeholder="Note liÃ©e au contexteâ€¦" />
              <button type="button" onclick="addMemo()">+</button>
            </div>
            <ul id="memo-list" class="alert-list"></ul>
          </div>

          <div class="widget">
            <h3>ğŸ—“ï¸ Agenda</h3>
            <div class="agenda-form">
              <select id="agenda-type">
                <option value="RÃ©union">RÃ©union</option>
                <option value="Parents">Parents</option>
                <option value="Admin">Admin</option>
                <option value="Classe">Classe</option>
                <option value="Personnel">Personnel</option>
              </select>
              <input id="agenda-date" type="date" />
              <input id="agenda-time" type="time" />
            </div>
            <div class="agenda-form">
              <input id="agenda-title" class="wide" placeholder="Titreâ€¦" />
              <input id="agenda-place" class="wide" placeholder="Lieu (facultatif)â€¦" />
              <button type="button" onclick="addAgenda()">+</button>
            </div>
            <ul id="agenda-list" class="agenda-list"></ul>
          </div>
        </div>
      </div>
    </section>

    <!-- PEDAGO -->
    <section id="view-pedago" class="view-section">
      <h2 style="color:var(--col-pedago);">PÃ©dagogie & cours</h2>

      <details open>
        <summary>ğŸ“ SÃ©quences CAP</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“ Exercices <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ—ºï¸ Progression <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>

      <details>
        <summary>ğŸ“ SÃ©quences Bac Pro</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Cours <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“ Exercices <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ—ºï¸ Progression <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>

      <details id="course-structure">
        <summary>ğŸ“š Structure des cours CAP / Bac Pro</summary>

        <details class="lvl-cap">
          <summary>CAP</summary>
          <details>
            <summary>ThÃ©matique A â€“ Lâ€™individu et sa santÃ©</summary>
            <div class="content-links">
              <a href="#" class="btn-yellow">A1 â€“ SystÃ¨me de santÃ© <span class="badge-soon">BientÃ´t</span></a>
              <a href="#" class="btn-yellow">A2 â€“ Sommeil <span class="badge-soon">BientÃ´t</span></a>
              <a href="#" class="btn-yellow">A3 â€“ ActivitÃ© physique <span class="badge-soon">BientÃ´t</span></a>
              <a href="#" class="btn-yellow">A4 â€“ Addictions <span class="badge-soon">BientÃ´t</span></a>
            </div>
          </details>
          <details>
            <summary>ThÃ©matique B â€“ Environnement</summary>
            <div class="content-links">
              <a href="#" class="btn-yellow">B1 â€“ Ressource en eau <span class="badge-soon">BientÃ´t</span></a>
              <a href="#" class="btn-yellow">B2 â€“ Risques majeurs <span class="badge-soon">BientÃ´t</span></a>
            </div>
          </details>
        </details>

        <details class="lvl-bacpro">
          <summary>Bac Pro</summary>
          <details>
            <summary>Seconde Bac Pro</summary>
            <div class="content-links">
              <a href="#" class="btn-yellow">A â€“ SantÃ© <span class="badge-soon">BientÃ´t</span></a>
              <a href="#" class="btn-yellow">B â€“ Environnement <span class="badge-soon">BientÃ´t</span></a>
              <a href="#" class="btn-yellow">C â€“ Travail <span class="badge-soon">BientÃ´t</span></a>
            </div>
          </details>
        </details>
      </details>

      <details>
        <summary>ğŸ“˜ RÃ©fÃ©rentiels PSE</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">CAP PSE <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">Bac Pro PSE <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>
    </section>

    <!-- EVAL -->
    <section id="view-eval" class="view-section">
      <h2 style="color:var(--col-eval);">Ã‰valuation & suivi</h2>

      <details open>
        <summary>ğŸ“Š PageProf & suivis</summary>
        <div class="content-links">
          <a href="pageprof.html" target="_blank" class="btn-yellow">ğŸ“Š Ouvrir PageProf</a>
          <a href="#" class="btn-yellow">ğŸ“ˆ Tableau de bord <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ§¾ Grilles / barÃ¨mes <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>

      <details>
        <summary>ğŸ“‚ Historique & exports</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">ğŸ—“ï¸ Bilans <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“¥ Exports JSON / CSV <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>
    </section>

    <!-- SCORES EXERCICES -->
    <section id="view-scores" class="view-section">
      <h2 style="color:var(--col-eval);">Scores exercices (en ligne)</h2>
      <div class="scores-card">
        <div class="scores-toolbar">
          <span class="scores-pill">ğŸ“Š Vue globale des exercices envoyÃ©s (FireStore â€“ Ã  connecter)</span>
          <button id="scores-btn-refresh" class="scores-button" type="button" disabled>ğŸ”„ Actualiser</button>
          <div id="scores-counter" class="scores-counter">0 enregistrement</div>
        </div>

        <div class="scores-filters">
          <input id="scores-filter-name" type="text" placeholder="Filtrer par nomâ€¦" disabled />
          <select id="scores-filter-class" disabled>
            <option value="">Toutes les classes</option>
            <option value="CAP1">CAP 1</option>
            <option value="CAP2">CAP 2</option>
            <option value="2nde Bac Pro">2nde Bac Pro</option>
            <option value="1Ã¨re Bac Pro">1Ã¨re Bac Pro</option>
            <option value="Tle Bac Pro">Tle Bac Pro</option>
          </select>
          <select id="scores-filter-exo" disabled>
            <option value="">Tous les exercices</option>
          </select>
        </div>

        <div class="scores-table-wrap">
          <table id="scores-table" class="results-table">
            <thead>
              <tr>
                <th>#</th>
                <th class="sortable" data-sort="nom">Nom Ã©lÃ¨ve</th>
                <th class="sortable" data-sort="classe">Classe</th>
                <th class="sortable" data-sort="exercice">Exercice</th>
                <th class="sortable" data-sort="score">Score</th>
                <th class="sortable" data-sort="date">Date dâ€™envoi</th>
              </tr>
            </thead>
            <tbody id="scores-tbody">
              <tr><td colspan="6" class="scores-empty">Connexion aux scores Ã  brancher (lâ€™interface est prÃªte).</td></tr>
            </tbody>
          </table>
        </div>

        <div class="scores-status-bar">
          <span><span class="scores-dot"></span><span id="scores-status">En attente de connexion Firestore (badge en haut Ã  droite quand les copies arrivent).</span></span>
          <span id="scores-last-update"></span>
        </div>
      </div>
    </section>

    <!-- CLASSES -->
    <section id="view-class" class="view-section">
      <h2 style="color:var(--col-class);">Classes & groupes</h2>

      <details open>
        <summary>ğŸª‘ Plans de classe</summary>
        <div class="content-links">
          <a href="prof_plan.html" target="_blank" class="btn-yellow">ğŸš€ Piloter</a>
          <button class="btn-blue-outline" type="button" onclick="window.open('ecran_plan.html','proj')">ğŸ“º Afficher au tableau</button>
        </div>
      </details>

      <details>
        <summary>ğŸ“‹ Listes dâ€™Ã©lÃ¨ves</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">ğŸ‘¥ Listes <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ” Recherche rapide <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>

      <details>
        <summary>ğŸ§© Besoins particuliers</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">â™¿ AmÃ©nagements <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ“˜ Dossiers MDPH / PAP <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>
    </section>

    <!-- PROJETS -->
    <section id="view-proj" class="view-section">
      <h2 style="color:var(--col-proj);">Projets & transversal</h2>

      <details open>
        <summary>ğŸ¨ Chef-dâ€™Å“uvre</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">CAP 1re annÃ©e <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">CAP 2e annÃ©e <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>

      <details>
        <summary>ğŸ« Projet dâ€™Ã©tablissement</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">ğŸ“„ Documents <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">ğŸ—“ï¸ RÃ©unions / CR <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>

      <details>
        <summary>ğŸ§  Ateliers CPS</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">SÃ©quences CPS <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">Outils dâ€™animation <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>
    </section>

    <!-- ADMIN -->
    <section id="view-admin" class="view-section">
      <h2 style="color:var(--col-admin);">Temps & institution</h2>

      <details open>
        <summary>ğŸ“… Emploi du temps</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">Vue semaine <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">Vue mois <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>

      <details>
        <summary>ğŸ¢ PFMP / stages</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">Calendrier PFMP <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">Suivi Ã©lÃ¨ves <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>

      <details>
        <summary>ğŸ¤ Pacte / missions</summary>
        <div class="content-links">
          <a href="#" class="btn-yellow">Heures rÃ©alisÃ©es <span class="badge-soon">BientÃ´t</span></a>
          <a href="#" class="btn-yellow">Bilans <span class="badge-soon">BientÃ´t</span></a>
        </div>
      </details>
    </section>

    <!-- LIVE -->
    <section id="view-live" class="view-section">
      <h2 style="color:var(--col-live-web);">Classe en temps rÃ©el</h2>

      <details class="live-block" open>
        <summary class="live-summary">ğŸ—¨ï¸ Sâ€™exprimer / Explorer</summary>
        <div class="content-links live-links">
          <a href="eleve_nuage.html" class="btn-yellow">ğŸŒ¥ï¸ Nuage de mots <span class="badge-role role-eleve">Ã‰lÃ¨ves</span></a>
          <a href="prof_nuage.html" class="btn-yellow">â˜ï¸ Nuage â€“ Prof <span class="badge-role role-prof">Prof</span></a>
          <a href="eleve_meteo.html" class="btn-yellow">ğŸ§  MÃ©tÃ©o Ã©lÃ¨ves <span class="badge-role role-eleve">Ã‰lÃ¨ves</span></a>
          <a href="prof_meteo.html" class="btn-yellow">ğŸ§  MÃ©tÃ©o â€“ Prof <span class="badge-role role-prof">Prof</span></a>
        </div>
      </details>

      <details class="live-block">
        <summary class="live-summary">ğŸ® Jeux / entraÃ®nement</summary>
        <div class="content-links live-links">
          <a href="eleve_vraifaux.html" class="btn-yellow">âœ…/âŒ Vrai / Faux <span class="badge-role role-eleve">Ã‰lÃ¨ves</span></a>
          <a href="prof_vraifaux.html" class="btn-yellow">âœ…/âŒ Vrai / Faux â€“ Prof <span class="badge-role role-prof">Prof</span></a>
        </div>
      </details>

      <details class="live-block">
        <summary class="live-summary">ğŸ“¤ Productions Ã©lÃ¨ves</summary>
        <div class="content-links live-links">
          <a href="devoirA3_cap_sedentarite_pse.html" class="btn-yellow">ğŸ“ CAP â€“ Devoir A3 sÃ©dentaritÃ©</a>
        </div>
      </details>

      <details class="live-block">
        <summary class="live-summary">ğŸ§˜ DÃ©tente</summary>
        <div class="content-links live-links">
          <a href="ecran_bulle.html" class="btn-yellow">ğŸ¤« Bulle silence <span class="badge-role role-prof">Prof</span></a>
          <a href="ecran_zen.html" class="btn-yellow">ğŸ§˜ Zen <span class="badge-role role-prof">Prof</span></a>
        </div>
      </details>
    </section>

    <!-- SITES -->
    <section id="view-sites" class="view-section">
      <h2 style="color:var(--col-sites);">Sites internet favoris</h2>

      <details open>
        <summary>ğŸ¢ Administratif</summary>
        <div class="content-links">
          <a href="https://portail.ac-lyon.fr/" class="btn-yellow" target="_blank">Portail AcadÃ©mie</a>
          <a href="https://eduscol.education.fr/" class="btn-yellow" target="_blank">Eduscol</a>
          <a href="https://www.education.gouv.fr/bo" class="btn-yellow" target="_blank">BO Ã‰ducation</a>
          <a href="https://www.service-public.fr/" class="btn-yellow" target="_blank">Service-public</a>
          <a href="https://cas.ent.auvergnerhonealpes.fr" class="btn-yellow" target="_blank">ENT / Mail pro</a>
        </div>
      </details>

      <details>
        <summary>ğŸ“š Ressources pÃ©dagogiques</summary>
        <div class="content-links">
          <a href="https://www.inrs.fr/" class="btn-yellow" target="_blank">INRS</a>
          <a href="https://www.santepubliquefrance.fr/" class="btn-yellow" target="_blank">SantÃ© Publique France</a>
        </div>
      </details>
    </section>
  </main>

  <script>
    // CLOCK
    function updateClock(){
      const now = new Date();
      const h = String(now.getHours()).padStart(2,"0");
      const m = String(now.getMinutes()).padStart(2,"0");
      const d = now.toLocaleDateString("fr-FR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"});
      document.getElementById("clock").textContent = h + ":" + m;
      document.getElementById("date").textContent = d;
    }
    setInterval(updateClock,1000);
    updateClock();

    // SIMPLE PLANNING (Ã  adapter si besoin)
    let planningOffset = 0;
    const planningData = [
      {time:"08h30",label:"CAP â€“ PSE",room:"Salle 12"},
      {time:"10h00",label:"Bac Pro â€“ PSE",room:"Salle 14"},
      {time:"13h30",label:"Accompagnement perso",room:"CDI"}
    ];
    function renderPlanning(){
      const list = document.getElementById("planning-list");
      const date = new Date();
      date.setDate(date.getDate()+planningOffset);
      const label = date.toLocaleDateString("fr-FR",{weekday:"long",day:"2-digit",month:"2-digit"});
      document.getElementById("planning-date-label").textContent = label;
      list.innerHTML = "";
      planningData.forEach(c=>{
        const li = document.createElement("li");
        li.className = "course-item";
        li.innerHTML = '<div class="course-time">'+c.time+'</div><div class="course-details"><strong>'+c.label+
                       '</strong><br><small>'+c.room+'</small></div>';
        list.appendChild(li);
      });
    }
    function changeDate(delta){planningOffset+=delta;renderPlanning();}
    renderPlanning();

    // LOCALSTORAGE HELPERS
    function save(key,value){localStorage.setItem(key,JSON.stringify(value));}
    function load(key,def){try{const v=JSON.parse(localStorage.getItem(key));return v??def;}catch(e){return def;}}

    // MEMO
    let memos = load("cockpit_memos",[]);
    function renderMemos(){
      const ul = document.getElementById("memo-list");
      ul.innerHTML = "";
      const current = document.querySelector(".view-section.active")?.id || "dashboard";
      memos.forEach((m,i)=>{
        const li = document.createElement("li");
        li.className = "alert-item" + (m.target===current?" context-active":"");
        li.innerHTML = '<span>'+m.text+'<br><small>'+m.target+'</small></span>'+
                       '<button type="button" onclick="deleteMemo('+i+')">âœ•</button>';
        ul.appendChild(li);
      });
    }
    function addMemo(){
      const target = document.getElementById("memo-target").value;
      const text = document.getElementById("memo-input").value.trim();
      if(!text) return;
      memos.push({target,text,date:new Date().toISOString()});
      save("cockpit_memos",memos);
      document.getElementById("memo-input").value="";
      renderMemos();
    }
    function deleteMemo(i){
      memos.splice(i,1); save("cockpit_memos",memos); renderMemos();
    }

    // AGENDA
    let agenda = load("cockpit_agenda",[]);
    function renderAgenda(){
      const ul = document.getElementById("agenda-list");
      ul.innerHTML="";
      const now = new Date();
      agenda.sort((a,b)=>new Date(a.when)-new Date(b.when));
      agenda.forEach((ev,i)=>{
        const d = new Date(ev.when);
        const soon = (d - now) < 7*24*3600*1000 && d>now;
        const li = document.createElement("li");
        li.className = "agenda-item"+(soon?" soon":"");
        li.innerHTML =
          '<div><strong>'+ev.title+'</strong><div class="agenda-meta">'+
          d.toLocaleDateString("fr-FR")+' â€“ '+d.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})+
          ' â€¢ '+ev.type+(ev.place?(" â€¢ "+ev.place):"")+
          '</div></div>'+
          '<button type="button" onclick="deleteAgenda('+i+')">âœ•</button>';
        ul.appendChild(li);
      });
    }
    function addAgenda(){
      const type = document.getElementById("agenda-type").value;
      const date = document.getElementById("agenda-date").value;
      const time = document.getElementById("agenda-time").value || "08:00";
      const title = document.getElementById("agenda-title").value.trim();
      const place = document.getElementById("agenda-place").value.trim();
      if(!date || !title) return;
      const when = new Date(date+"T"+time);
      agenda.push({type,title,place,when});
      save("cockpit_agenda",agenda);
      document.getElementById("agenda-title").value="";
      document.getElementById("agenda-place").value="";
      renderAgenda();
    }
    function deleteAgenda(i){
      agenda.splice(i,1); save("cockpit_agenda",agenda); renderAgenda();
    }

    // VUES
    function showView(id,navEl){
      document.querySelectorAll(".view-section").forEach(v=>v.classList.remove("active"));
      const section = document.getElementById(id);
      if(section){section.classList.add("active");}
      document.querySelectorAll(".nav-item").forEach(n=>n.classList.remove("active"));
      if(navEl){navEl.classList.add("active");}
      const titleMap = {
        "dashboard":"Tableau de bord",
        "view-pedago":"PÃ©dagogie & cours",
        "view-eval":"Ã‰valuation & suivi",
        "view-scores":"Scores exercices",
        "view-class":"Classes & groupes",
        "view-proj":"Projets & transversal",
        "view-admin":"Temps & institution",
        "view-live":"Classe en temps rÃ©el",
        "view-sites":"Sites internet favoris"
      };
      document.getElementById("page-title").textContent = titleMap[id] || "Cockpit";
      renderMemos();
    }

    // MENU MOBILE
    function toggleMenu(){
      document.body.classList.toggle("menu-open");
    }
    function closeMenu(){
      document.body.classList.remove("menu-open");
    }

    // INIT
    renderMemos();
    renderAgenda();
  </script>
</body>
</html>
